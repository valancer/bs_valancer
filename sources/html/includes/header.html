<header class="global-menu-new">
	<div class="title">
		<a href="#" class="btn-home">BESPIN</a>

		<div id="select-service" class="custom-select-container">
			<button type="button" class="btn-custom-select">
				@@if ( service == "portal" ) {<span class="txt service-portal">SERVICE PORTAL</span>}
				@@if ( service == "asset" ) {<span class="txt asset-management">ASSET MANAGEMENT</span>}
				@@if ( service == "metering" ) {<span class="txt metering">METERING</span>}
				@@if ( service == "monitoring" ) {<span class="txt monitoring">MONITORING DASHBOARD</span>}
				@@if ( service == "its" ) {<span class="txt its">ITS</span>}
			</button>
			<div class="list-container">
				<ul class="list-custom-select">
					<li @@if ( service == "portal" ) {class="is-selected"}>
						<button type="button">
							<span class="txt service-portal">SERVICE PORTAL</span>
						</button>
					</li>
					<li @@if ( service == "asset" ) {class="is-selected"}>
						<button type="button">
							<span class="txt asset-management">ASSET MANAGEMENT</span>
						</button>
					</li>
					<li @@if ( service == "metering" ) {class="is-selected"}>
						<button type="button">
							<span class="txt metering">METERING</span>
						</button>
					</li>
					<li @@if ( service == "monitoring" ) {class="is-selected"}>
						<button type="button">
							<span class="txt monitoring">MONITORING DASHBOARD</span>
						</button>
					</li>
					<li @@if ( service == "workflow" ) {class="is-selected"}>
						<button type="button">
							<span class="txt its">ITS</span>
						</button>
					</li>
				</ul>
			</div>
		</div>

		<div id="select-company" class="custom-select-container">
			<button type="button" class="btn-custom-select">베스핀글로벌</button>
			<div class="list-container">
				<ul class="list-custom-select">
					<li><button type="button">베스핀글로벌</button></li>
					<li class="is-selected"><button type="button">망고플레이트</button></li>
					<li><button type="button">회사명 테스트</button></li>
					<li><button type="button">회사명 테스트 테스트</button></li>
					<li><button type="button">회사명 테스트 테스트 테스트</button></li>
					<li><button type="button">베스핀글로벌</button></li>
					<li><button type="button">망고플레이트</button></li>
					<li><button type="button">회사명 테스트</button></li>
					<li><button type="button">회사명 테스트 테스트</button></li>
					<li><button type="button">회사명 테스트 테스트 테스트</button></li>
					<li><button type="button">베스핀글로벌</button></li>
					<li><button type="button">망고플레이트</button></li>
					<li><button type="button">회사명 테스트</button></li>
					<li><button type="button">회사명 테스트 테스트</button></li>
					<li><button type="button">회사명 테스트 테스트 테스트</button></li>
					<li><button type="button">베스핀글로벌</button></li>
					<li><button type="button">망고플레이트</button></li>
					<li><button type="button">회사명 테스트</button></li>
					<li><button type="button">회사명 테스트 테스트</button></li>
					<li><button type="button">회사명 테스트 테스트 테스트</button></li>
					<li><button type="button">베스핀글로벌</button></li>
					<li><button type="button">망고플레이트</button></li>
					<li><button type="button">회사명 테스트</button></li>
					<li><button type="button">회사명 테스트 테스트</button></li>
					<li><button type="button">회사명 테스트 테스트 테스트</button></li>
				</ul>
			</div>
		</div>
	</div>


	<!-- language, notification, user -->
	<div class="utils">
		<div id="language" class="custom-select-container small">
			<button type="button" class="btn-custom-select">한국어</button>
			<div class="list-container">
				<ul class="list-custom-select">
					<li><button type="button">ENGLISH</button></li>
					<li class="is-selected"><button type="button">한국어</button></li>
					<li><button type="button">中文</button></li>
				</ul>
			</div>
		</div>

		<a href="#notification" class="notification">
			<span class="hidden">new</span><em class="badge">2</em> notification
		</a>

		<figure class="user">
			<div class="thumb"><img src="assets/images/user_profile.png" alt="parkNameJung profile image"></div>
			<figcaption>
				<button type="button">Hello! ParkNamJung</button>
			</figcaption>
		</figure>

		<div class="user-menus">
			<ul>
				<li><button type="button">대시보드</button></li>
				<li><button type="button">내 계정</button></li>
				<li><button type="button">회사 계정 관리</button></li>
				<li><button type="button">사용자 및 권한 관리</button></li>
				<li><button type="button">클라우드 계정 관리</button></li>
				<li><button type="button">서비스 그룹 관리</button></li>
			</ul>
			<button type="button">로그아웃</button>
		</div>
	</div>
</header>
<script>
/* BSPSelectBox */
function BSPSelectBox($container) {
	this.$container = $container;
	this.$btnSelect;
	this.$listContainer;
	this.$listItems;

	this.init();
}

BSPSelectBox.prototype.init = function() {
	var _ = this;

	_.$btnSelect = _.$container.find('.btn-custom-select');
	_.$listContainer = _.$container.find('.list-container');
	_.$listItems = _.$listContainer.find('button');

	var btnWidth = _.$btnSelect.width();
	var listContainerWidth = _.$listContainer.width();

	if( btnWidth > listContainerWidth ) {
		_.$listContainer.width(btnWidth + "px");
	} else {
		_.$btnSelect.width(listContainerWidth + "px");
		if( _.$container.hasClass('small') ) {
			_.$listContainer.width((_.$btnSelect.width()+15) + "px");
		} else {
			_.$listContainer.width((_.$btnSelect.width()+72) + "px");
		}
	}
	_.$btnSelect.on('click', function(e) {
		$(this).toggleClass("is-selected");
	});

	_.$listItems.on('click', function(e) {
		_.select($(this));
	});
}

BSPSelectBox.prototype.hide = function() {
	var _ = this;

	_.$btnSelect.removeClass("is-selected")
}

BSPSelectBox.prototype.select = function($item) {
	var _ = this;

	_.$listItems.closest('li').removeClass('is-selected');
	$item.closest('li').addClass('is-selected');

	_.$btnSelect.html($item.html());
	_.hide();
}



/* GlobalMenu */
var GlobalMenu = (function ($) {
	var scope,
		$container,
		selectService,
		selectCompany,
		selectLanguage,
		$user,
		init = function() {
			$container = $('.global-menu-new');

			selectService = new BSPSelectBox($('#select-service'));
			selectCompany = new BSPSelectBox($('#select-company'));
			selectLanguage = new BSPSelectBox($('#language'));

			$user = $container.find('.user');

			initLayout();
			initEvent();
		};

	function initLayout() {
	}

	function initEvent() {
		$user.on('click', function() {
			$(this).toggleClass('is-open');
		});

		$(document).click(function (e) {
			if( !$(event.target).closest(".user").length ) {
				$user.removeClass('is-open');
			}

			if( !$(event.target).closest("#select-service").length ) {
				selectService.hide();
			}

			if( !$(event.target).closest("#select-company").length ) {
				selectCompany.hide();
			}

			if( !$(event.target).closest("#language").length ) {
				selectLanguage.hide();
			}
		});
	}

	return {
		init: function() {
			init();
		}
	};
}(jQuery));

$(document).ready(function(e) {

	GlobalMenu.init();
});
</script>




@@if ( service == "asset" ) {
<nav class="sub-menus">
	<div class="contents-inner">
		<h2>하위 메뉴 바로가기</h2>
		
		<ul class="list-menus">
			<li @@if ( sub == "dashboard" ) { class="is-selected" }><a href="#">DASHBOARD</a></li>
			<li @@if ( sub == "service" ) { class="is-selected" }><a href="#">SERVICE GROUP</a></li>
			<li @@if ( sub == "usage" ) { class="is-selected" }><a href="#">USAGE</a></li>
			<li @@if ( sub == "performance" ) { class="is-selected" }><a href="#">PERFORMANCE</a></li>
		</ul>
	</div>
</nav>
}

@@if ( service == "metering" ) {
<nav class="sub-menus">
	<div class="contents-inner">
		<h2>하위 메뉴 바로가기</h2>

		<ul class="list-menus">
			<li @@if ( sub == "dashboard" ) { class="is-selected" }><a href="#">DASHBOARD</a></li>
			<li @@if ( sub == "billing" ) { class="is-selected" }><a href="#">BILLING</a></li>
			<li @@if ( sub == "statistics" ) { class="is-selected" }><a href="#">STATISTICS</a></li>
			<li @@if ( sub == "budgeting" ) { class="is-selected" }>
				<a href="#">BUDGETING</a>
				<ul class="list-sub-menus">
					<li><a href="#">Budget Overview</a></li>
					<li class="is-selected"><a href="#">Budget Setting</a></li>
					<li><a href="#">Alarm Setting</a></li>
				</ul>
			</li>
			<li @@if ( sub == "status" ) { class="is-selected" }><a href="#">COST OPTIMIZATION</a></li>
			<li @@if ( sub == "history" ) { class="is-selected" }><a href="#">PAYMENT &amp; DISCOUNT</a></li>
		</ul>
	</div>
</nav>
}
