<header class="global-menu-new logout">

	<div class="title">
		<a href="#" class="btn-home">BESPIN GLOBAL SERVICE</a>
	</div>
	
	<!-- language, notification, user -->
	<div class="utils">
		<div id="language" class="custom-select-container small">
			<button type="button" class="btn-custom-select">한국어</button>
			<div class="list-container">
				<ul class="list-custom-select">
					<li><button type="button">ENGLISH</button></li>
					<li class="is-selected"><button type="button">한국어</button></li>
					<li><button type="button">中文</button></li>
				</ul>
			</div>
		</div>

		<p class="btns">
			<a href="#" class="btn">LOG IN</a>
			<a href="#" class="btn">SIGN UP</a>
		</p>
	</div>

</header>
<script>
/* BSPSelectBox */
function BSPSelectBox($container) {
	this.$container = $container;
	this.$btnSelect;
	this.$listContainer;
	this.$listItems;

	this.init();
}

BSPSelectBox.prototype.init = function() {
	var _ = this;

	_.$btnSelect = _.$container.find('.btn-custom-select');
	_.$listContainer = _.$container.find('.list-container');
	_.$listItems = _.$listContainer.find('button');

	var btnWidth = _.$btnSelect.width();
	var listContainerWidth = _.$listContainer.width() + 30;
	if( btnWidth > listContainerWidth ) {
		_.$listContainer.width(btnWidth + "px");
	} else {
		_.$btnSelect.width(listContainerWidth + "px");
	}

	_.$btnSelect.on('click', function(e) {
		$(this).toggleClass("is-selected");
	});

	_.$listItems.on('click', function(e) {
		_.select($(this));
	});
}

BSPSelectBox.prototype.hide = function() {
	var _ = this;

	_.$btnSelect.removeClass("is-selected")
}

BSPSelectBox.prototype.select = function($item) {
	var _ = this;

	_.$listItems.closest('li').removeClass('is-selected');
	$item.closest('li').addClass('is-selected');

	_.$btnSelect.html($item.html());
	_.hide();
}



/* GlobalMenu */
var GlobalMenu = (function ($) {
	var scope,
		$container,
		selectService,
		selectCompany,
		selectLanguage,
		init = function() {
			$container = $('.global-menu-new');

			selectService = new BSPSelectBox($('#select-service'));
			selectCompany = new BSPSelectBox($('#select-company'));
			selectLanguage = new BSPSelectBox($('#language'));

			initLayout();
			initEvent();
		};

	function initLayout() {
	}

	function initEvent() {
		$(document).click(function (e) {
			if( !$(event.target).closest(".custom-select-container").length ) {
				selectService.hide();
				selectCompany.hide();
				selectLanguage.hide();
			}
		});
	}

	return {
		init: function() {
			init();
		}
	};
}(jQuery));

$(document).ready(function(e) {

	GlobalMenu.init();
});
</script>
